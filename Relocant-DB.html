<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Relocant.DB</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">relocant-1.0.0: A PostgreSQL migration CLI tool and library</span><ul class="links" id="page-menu"><li><a href="src/Relocant.DB.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Relocant.DB</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module manages PostgreSQL connections and <em>relocant</em>'s DB schema.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:ConnectionString">ConnectionString</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Table">Table</a></li><li class="src short"><a href="#v:defaultTable">defaultTable</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a></li><li class="src short"><a href="#v:connect">connect</a> :: <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a> -&gt; <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Relocant.html#t:Connection" title="Relocant">Connection</a></li><li class="src short"><a href="#v:init">init</a> :: <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> -&gt; <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:withLock">withLock</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a</li><li class="src short"><a href="#v:withTryLock">withTryLock</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> -&gt; (<a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a) -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a</li><li class="src short"><a href="#v:lock">lock</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:tryLock">tryLock</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:unlock">unlock</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:dumpSchema">dumpSchema</a> :: <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ConnectionString" class="def">ConnectionString</a> <a href="src/Relocant.DB.html#ConnectionString" class="link">Source</a> <a href="#t:ConnectionString" class="selflink">#</a></p><div class="doc"><p>PostgreSQL connection string. (This is a newtype over <code><a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code>)</p><p>for syntax, see: <a href="https://hackage.haskell.org/package/postgresql-simple/docs/Database-PostgreSQL-Simple.html#v:connectPostgreSQL">https://hackage.haskell.org/package/postgresql-simple/docs/Database-PostgreSQL-Simple.html#v:connectPostgreSQL</a></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ConnectionString">Instances</h4><details id="i:ConnectionString" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ConnectionString:ToJSON:1"></span> <a href="../aeson-2.1.2.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a></span> <a href="src/Relocant.DB.html#line-43" class="link">Source</a> <a href="#t:ConnectionString" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ConnectionString:ToJSON:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Relocant-DB.html">Relocant.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toJSON">toJSON</a> :: <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a> -&gt; <a href="../aeson-2.1.2.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="#v:toJSON" class="selflink">#</a></p><p class="src"><a href="#v:toEncoding">toEncoding</a> :: <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a> -&gt; <a href="../aeson-2.1.2.1/Data-Aeson-Encoding-Internal.html#t:Encoding" title="Data.Aeson.Encoding.Internal">Encoding</a> <a href="#v:toEncoding" class="selflink">#</a></p><p class="src"><a href="#v:toJSONList">toJSONList</a> :: [<a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a>] -&gt; <a href="../aeson-2.1.2.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="#v:toJSONList" class="selflink">#</a></p><p class="src"><a href="#v:toEncodingList">toEncodingList</a> :: [<a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a>] -&gt; <a href="../aeson-2.1.2.1/Data-Aeson-Encoding-Internal.html#t:Encoding" title="Data.Aeson.Encoding.Internal">Encoding</a> <a href="#v:toEncodingList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ConnectionString:IsString:2"></span> <a href="../base-4.18.2.1/Data-String.html#t:IsString" title="Data.String">IsString</a> <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a></span> <a href="src/Relocant.DB.html#line-40" class="link">Source</a> <a href="#t:ConnectionString" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ConnectionString:IsString:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Relocant-DB.html">Relocant.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fromString">fromString</a> :: <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a> <a href="#v:fromString" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ConnectionString:Show:3"></span> <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a></span> <a href="src/Relocant.DB.html#line-38" class="link">Source</a> <a href="#t:ConnectionString" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ConnectionString:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Relocant-DB.html">Relocant.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a> -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a> -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a>] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ConnectionString:Eq:4"></span> <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a></span> <a href="src/Relocant.DB.html#line-39" class="link">Source</a> <a href="#t:ConnectionString" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ConnectionString:Eq:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Relocant-DB.html">Relocant.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a> -&gt; <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a> -&gt; <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Table" class="def">Table</a> <a href="src/Relocant.DB.Table.html#Table" class="link">Source</a> <a href="#t:Table" class="selflink">#</a></p><div class="doc"><p><em>relocant's</em> migration table name.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Table">Instances</h4><details id="i:Table" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Table:ToJSON:1"></span> <a href="../aeson-2.1.2.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a></span> <a href="src/Relocant.DB.Table.html#line-32" class="link">Source</a> <a href="#t:Table" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Table:ToJSON:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Relocant-DB-Table.html">Relocant.DB.Table</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toJSON">toJSON</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="../aeson-2.1.2.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="#v:toJSON" class="selflink">#</a></p><p class="src"><a href="#v:toEncoding">toEncoding</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="../aeson-2.1.2.1/Data-Aeson-Encoding-Internal.html#t:Encoding" title="Data.Aeson.Encoding.Internal">Encoding</a> <a href="#v:toEncoding" class="selflink">#</a></p><p class="src"><a href="#v:toJSONList">toJSONList</a> :: [<a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a>] -&gt; <a href="../aeson-2.1.2.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="#v:toJSONList" class="selflink">#</a></p><p class="src"><a href="#v:toEncodingList">toEncodingList</a> :: [<a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a>] -&gt; <a href="../aeson-2.1.2.1/Data-Aeson-Encoding-Internal.html#t:Encoding" title="Data.Aeson.Encoding.Internal">Encoding</a> <a href="#v:toEncodingList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Table:IsString:2"></span> <a href="../base-4.18.2.1/Data-String.html#t:IsString" title="Data.String">IsString</a> <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a></span> <a href="src/Relocant.DB.Table.html#line-19" class="link">Source</a> <a href="#t:Table" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Table:IsString:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Relocant-DB-Table.html">Relocant.DB.Table</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fromString">fromString</a> :: <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> <a href="#v:fromString" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Table:Show:3"></span> <a href="../base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a></span> <a href="src/Relocant.DB.Table.html#line-24" class="link">Source</a> <a href="#t:Table" class="selflink">#</a></td><td class="doc"><p>Return a <code><a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a></code> that can be <code><a href="../base-4.18.2.1/Data-String.html#v:fromString" title="Data.String">fromString</a></code>ed back to a <code><a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a></code>.</p></td></tr><tr><td colspan="2"><details id="i:id:Table:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Relocant-DB-Table.html">Relocant.DB.Table</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="../base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a>] -&gt; <a href="../base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Table:Eq:4"></span> <a href="../base-4.18.2.1/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a></span> <a href="src/Relocant.DB.Table.html#line-18" class="link">Source</a> <a href="#t:Table" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Table:Eq:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Relocant-DB-Table.html">Relocant.DB.Table</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Table:ToField:5"></span> <a href="../postgresql-simple-0.7.0.0/Database-PostgreSQL-Simple-ToField.html#t:ToField" title="Database.PostgreSQL.Simple.ToField">ToField</a> <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a></span> <a href="src/Relocant.DB.Table.html#line-20" class="link">Source</a> <a href="#t:Table" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Table:ToField:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Relocant-DB-Table.html">Relocant.DB.Table</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toField">toField</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="../postgresql-simple-0.7.0.0/Database-PostgreSQL-Simple-ToField.html#t:Action" title="Database.PostgreSQL.Simple.ToField">Action</a> <a href="#v:toField" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:defaultTable" class="def">defaultTable</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> <a href="src/Relocant.DB.Table.html#defaultTable" class="link">Source</a> <a href="#v:defaultTable" class="selflink">#</a></p><div class="doc"><p>The default table name, which is &quot;public.relocant_migration&quot;.</p></div></div><div class="top"><p class="src"><a id="v:connect" class="def">connect</a> :: <a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a> -&gt; <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> <a href="src/Relocant.DB.html#connect" class="link">Source</a> <a href="#v:connect" class="selflink">#</a></p><div class="doc"><p>Connect to the DB using the given <code><a href="Relocant-DB.html#t:ConnectionString" title="Relocant.DB">ConnectionString</a></code> and
 initialize the migrations table.</p></div></div><div class="top"><p class="src"><a id="v:init" class="def">init</a> :: <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> -&gt; <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Relocant.DB.html#init" class="link">Source</a> <a href="#v:init" class="selflink">#</a></p><div class="doc"><p>Initialize the migrations table.</p></div></div><div class="top"><p class="src"><a id="v:withLock" class="def">withLock</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a <a href="src/Relocant.DB.html#withLock" class="link">Source</a> <a href="#v:withLock" class="selflink">#</a></p><div class="doc"><p>Use <em>pg_advisory_{lock,unlock}</em> to restrict access to
 the migrations table. The given table is used to
 generate the lock's ID, so that in the unlikely case where
 you have multiple migrations tables in your database you can
 lock them separately.</p></div></div><div class="top"><p class="src"><a id="v:withTryLock" class="def">withTryLock</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> -&gt; (<a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a) -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a <a href="src/Relocant.DB.html#withTryLock" class="link">Source</a> <a href="#v:withTryLock" class="selflink">#</a></p><div class="doc"><p>A non-blocking version of <code><a href="Relocant-DB.html#v:withLock" title="Relocant.DB">withLock</a></code>. <code><a href="../base-4.18.2.1/Data-Bool.html#v:True" title="Data.Bool">True</a></code> is passed
 to the callback if the lock was successfully acquired, <code><a href="../base-4.18.2.1/Data-Bool.html#v:False" title="Data.Bool">False</a></code> otherwise.</p></div></div><div class="top"><p class="src"><a id="v:lock" class="def">lock</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Relocant.DB.html#lock" class="link">Source</a> <a href="#v:lock" class="selflink">#</a></p><div class="doc"><p>Use <em>pg_advisory_lock</em> to lock the database, restricting
 access to the migrations table. The given table is used to
 generate the lock's ID, so that in the unlikely case where
 you have multiple migrations tables in your database you can
 lock them separately.</p></div></div><div class="top"><p class="src"><a id="v:tryLock" class="def">tryLock</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Relocant.DB.html#tryLock" class="link">Source</a> <a href="#v:tryLock" class="selflink">#</a></p><div class="doc"><p>A non-blocking version of <code><a href="Relocant-DB.html#v:lock" title="Relocant.DB">lock</a></code>. Returns <code><a href="../base-4.18.2.1/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the
 lock was successfully acquired, <code><a href="../base-4.18.2.1/Data-Bool.html#v:False" title="Data.Bool">False</a></code> otherwise.</p></div></div><div class="top"><p class="src"><a id="v:unlock" class="def">unlock</a> :: <a href="Relocant-DB.html#t:Table" title="Relocant.DB">Table</a> -&gt; <a href="Relocant.html#t:Connection" title="Relocant">Connection</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Relocant.DB.html#unlock" class="link">Source</a> <a href="#v:unlock" class="selflink">#</a></p><div class="doc"><p>Use <em>pg_advisory_unlock</em> to unlock the database.</p></div></div><div class="top"><p class="src"><a id="v:dumpSchema" class="def">dumpSchema</a> :: <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Relocant.DB.html#dumpSchema" class="link">Source</a> <a href="#v:dumpSchema" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>